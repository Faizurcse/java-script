<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crypto Market Data</title>
  <style>
    .container {
  margin: 20px auto;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
  max-width: 600px;
}

input[type="text"], button {
  margin-right: 10px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
}

th {
  background-color: #f2f2f2;
}

tr:hover {
  background-color: #f5f5f5;
}

  </style>
</head>
<body>
  <div class="container">
    <input type="text" id="searchInput" placeholder="Search...">
    <button onclick="searchData()">Search</button>
    <button onclick="sortData()">Sort</button>
    <table id="cryptoTable">
      <!-- Table content will be generated dynamically -->
    </table>
  </div>
  <script>
    // Function to fetch data using .then
function fetchDataWithThen() {
  fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1&sparkline=false')
    .then(response => response.json())
    .then(data => renderTable(data))
    .catch(error => console.error('Error:', error));
}

// Function to fetch data using async await
async function fetchDataWithAsync() {
  try {
    const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1&sparkline=false');
    const data = await response.json();
    renderTable(data);
  } catch (error) {
    console.error('Error:', error);
  }
}

// Function to render table
function renderTable(data) {
  const table = document.getElementById('cryptoTable');
  table.innerHTML = ''; // Clear table content

  // Create table headers
  const headers = ['Name', 'Symbol', 'Current Price', 'Total Volume'];
  const headerRow = table.insertRow();
  headers.forEach(header => {
    const th = document.createElement('th');
    th.textContent = header;
    headerRow.appendChild(th);
  });

  // Create table rows with data
  data.forEach(coin => {
    const row = table.insertRow();
    const nameCell = row.insertCell();
    const symbolCell = row.insertCell();
    const priceCell = row.insertCell();
    const volumeCell = row.insertCell();

    nameCell.textContent = coin.name;
    symbolCell.textContent = coin.symbol;
    priceCell.textContent = coin.current_price;
    volumeCell.textContent = coin.total_volume;
  });
}

// Function to handle search
function searchData() {
  const input = document.getElementById('searchInput').value.toUpperCase();
  const rows = document.getElementById('cryptoTable').getElementsByTagName('tr');

  for (let i = 1; i < rows.length; i++) {
    const name = rows[i].getElementsByTagName('td')[0].textContent.toUpperCase();
    if (name.includes(input)) {
      rows[i].style.display = '';
    } else {
      rows[i].style.display = 'none';
    }
  }
}

// Function to handle sort
function sortData() {
  const table = document.getElementById('cryptoTable');
  const rows = table.getElementsByTagName('tr');
  const data = [];

  // Extract data from table rows
  for (let i = 1; i < rows.length; i++) {
    const cells = rows[i].getElementsByTagName('td');
    data.push({
      name: cells[0].textContent,
      symbol: cells[1].textContent,
      price: parseFloat(cells[2].textContent),
      volume: parseFloat(cells[3].textContent)
    });
  }

  // Sort data by market cap (current price)
  data.sort((a, b) => b.price - a.price);

  // Render sorted data
  renderTable(data);
}

  </script>
</body>
</html>
